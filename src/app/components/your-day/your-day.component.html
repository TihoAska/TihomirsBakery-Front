<div class="container">
    <div class="kitchen-background">
        <img [src]="images[0].path" [alt]="images[0].name" height="100%" width="100%">
        <div class="description">
            <p id="title">your day.</p>
            <p id="welcome">here you can track your calories and macros by logging your food and workout.</p>
        </div>
        <div class="gradient-overlay"></div>
    </div>

    <div class="goal-and-meals">
        <div class="gradient-overlay-2"></div>
        <div class="todays-goal">
            <div class="calories-and-chart">
                <div class="calories">
                    <h3>Today's goal:</h3>
                    <p>{{ totalMealsValue.calories }} kcal</p>
                </div>
                <div id="chart">
                    <apx-chart
                        [series]="helperService.chartOptions.chartSeries"
                        [chart]="helperService.chartOptions.chartDetails"
                        [legend]="helperService.chartOptions.legendOptions"
                        [fill]="helperService.chartOptions.fill"
                        [tooltip]="helperService.chartOptions.tooltip"
                    ></apx-chart>
                </div>
            </div>

            <div class="macros">
                <div class="protein">
                    <p class="macro">Protein: </p>
                    <p class="macro-number">{{ totalMealsValue.protein }} g</p>
                </div>
                <div class="fats">
                    <p class="macro">Fats:</p>
                    <p class="macro-number">{{ totalMealsValue.fats }} g</p>
                </div>
                <div class="carbs">
                    <p class="macro">Carbs:</p>
                    <p class="macro-number">{{ totalMealsValue.carbs }} g</p>
                </div>
            </div>
        </div>

        <hr style="border-color: aquamarine;">

        <div class="workout-and-meals">
            <div class="meals">
                <div class="breakfast" (click)="toggleAddMeal('breakfast')">
                    <div class="breakfast-content">
                        <img [src]="footerService.pluses[0].icon" [alt]="footerService.pluses[0].name" height="100px" width="100px">
                        <p>ADD BREAKFAST</p>
                    </div>
                </div>
                <div class="lunch" (click)="toggleAddMeal('lunch')">
                    <div class="lunch-content">
                        <img [src]="footerService.pluses[1].icon" [alt]="footerService.pluses[1].name" height="100px" width="100px">
                        <p>ADD LUNCH</p>
                    </div>
                </div>
                <div class="dinner" (click)="toggleAddMeal('dinner')">
                    <div class="dinner-content">
                        <img [src]="footerService.pluses[2].icon" [alt]="footerService.pluses[2].name" height="100px" width="100px">
                        <p>ADD DINNER</p>
                    </div>
                </div>
            </div>

            <hr>

            <div class="workout">
                <p>add workout.</p>
            </div>
        </div>
    </div>

    <div 
        @fadeInOut 
        class="add-meal" 
        *ngIf="isAddMealVisible" 
        [ngStyle]="{
            'border-bottom-left-radius': pickedMeals.length > 0 ? '0px' : '20px',
            'border-bottom-right-radius': pickedMeals.length > 0 ? '0px' : '20px'   
        }"
    >
        <mat-icon (click)="closeAddMeal()">close</mat-icon>
        <p>add {{ mainMealName }}.</p>   
        <div class="search">
            <input [formControl]="searchControl" id="search-bar" type="search" placeholder="search for food...">
            <div class="magnifier-container">
                <mat-icon>search</mat-icon>
            </div>
        </div>

        <div class="calories-and-macros">
            <div class="calories">
                <p>Calories: </p>
                <p>{{ pickedMealsValue.calories | number:'1.0-2' }} kcal</p>
            </div>
    
            <div class="macros">
                <p id="protein">Protein: {{ pickedMealsValue.protein | number:'1.0-2' }} g</p>
                <p id="carbs">Carbs: {{ pickedMealsValue.carbs | number:'1.0-2' }} g</p>
                <p id="fats">Fats: {{ pickedMealsValue.fats | number:'1.0-2' }} g</p>
            </div>
        </div>

        <div class="search-results" *ngIf="showQuery">
            <div *ngFor="let meal of filteredMeals">
                <div class="searched-meal" (click)="pickMeal(meal)">
                    <div class="searched-meal-name-container">
                        <p id="searched-meal-name">{{ meal.name }}</p>
                    </div>
                    
                    <div class="searched-macros-container">
                        <p style="color: orange;">Protein: {{ meal.proteins }} g</p>
                        <p style="color: green;">Carbs: {{ meal.carbs }} g</p>
                        <p style="color: lightblue;">Fats: {{ meal.fats }} g</p>
                        <p>Calories: {{ meal.calories }} kcal</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="button-container" *ngIf="isFoodPicked" (click)="addMeal()">
            <button>Add</button>
        </div>

        <div class="picked-meals" *ngIf="pickedMeals.length > 0">
            <div class="picked-meal" *ngFor="let meal of pickedMeals">
                <p>{{ meal.name }} - 
                    <span style="color: orange;">P: {{ meal.proteins }} g</span>
                      - 
                    <span style="color: greenyellow;"> C: {{ meal.carbs }} g </span> 
                      - 
                    <span style="color: lightblue;">F: {{ meal.fats }} g</span>

                    - Cal: {{ meal.calories }} kcal
                </p>
            </div>
        </div>
    </div>
</div>